{% extends "base.html" %}
{% block content %}
<h1 style="font-size:20px; margin-bottom:15px;">{{ store_name }} 메뉴 관리</h1>

<!-- 새 메뉴 추가 -->
<div style="margin-bottom:20px;">
  <form method="post" action="/menu/add" style="display:flex; flex-wrap:wrap; gap:8px; align-items:center;">
    <input type="hidden" name="store_id" value="{{ store_id }}">
    <input type="text" name="menu_name" placeholder="메뉴명" required style="width:100px;">
    <input type="number" name="price" placeholder="가격" required style="width:80px;">
    <input type="number" name="minutes" placeholder="시간(분)" required style="width:80px;">
    <button type="submit" style="padding:4px 10px; background:#4caf50; color:white; border:none; border-radius:4px;">
      추가
    </button>
  </form>
</div>

<!-- 기존 메뉴 목록 -->
<table style="width:100%; border-collapse:collapse; font-size:14px;">
  <thead>
    <tr style="background:#f5f5f5;">
      <th style="padding:6px; border:1px solid #ccc;">ID</th>
      <th style="padding:6px; border:1px solid #ccc;">메뉴명</th>
      <th style="padding:6px; border:1px solid #ccc;">가격</th>
      <th style="padding:6px; border:1px solid #ccc;">시간</th>
      <th style="padding:6px; border:1px solid #ccc;">수정</th>
      <th style="padding:6px; border:1px solid #ccc;">삭제</th>
    </tr>
  </thead>
  <tbody>
    {% for m in menus %}
    <tr>
      <form method="post" action="/menu/update">
        <td style="padding:6px; border:1px solid #ccc; text-align:center;">
          {{ m[0] }}
          <input type="hidden" name="menu_id" value="{{ m[0] }}">
        </td>
        <td style="padding:6px; border:1px solid #ccc;">
          <input type="text" name="menu_name" value="{{ m[1] }}" style="width:100%;" required>
        </td>
        <td style="padding:6px; border:1px solid #ccc;">
          <input type="number" name="price" value="{{ m[2] }}" style="width:80px;" required>
        </td>
        <td style="padding:6px; border:1px solid #ccc;">
          <input type="number" name="minutes" value="{{ m[3] }}" style="width:60px;" required>
        </td>
        <td style="padding:6px; border:1px solid #ccc; text-align:center;">
          <button type="submit" style="padding:2px 6px; background:#2196f3; color:white; border:none; border-radius:3px; font-size:12px;">
            저장
          </button>
        </td>
      </form>
      <td style="padding:6px; border:1px solid #ccc; text-align:center;">
        <form method="post" action="/menu/delete" onsubmit="return confirm('정말 삭제하시겠습니까?');" style="margin:0;">
          <input type="hidden" name="menu_id" value="{{ m[0] }}">
          <button type="submit" style="padding:2px 6px; background:#f44336; color:white; border:none; border-radius:3px; font-size:12px;">
            삭제
          </button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
